!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.panorama=n()}}(function(){var n;return function e(n,t,r){function i(f,u){if(!t[f]){if(!n[f]){var a="function"==typeof require&&require;if(!u&&a)return a(f,!0);if(o)return o(f,!0);var c=new Error("Cannot find module '"+f+"'");throw c.code="MODULE_NOT_FOUND",c}var s=t[f]={exports:{}};n[f][0].call(s.exports,function(e){var t=n[f][1][e];return i(t?t:e)},s,s.exports,e,n,t,r)}return t[f].exports}for(var o="function"==typeof require&&require,f=0;f<r.length;f++)i(r[f]);return i}({1:[function(n,e,t){function r(){s=!1,u.length?c=u.concat(c):l=-1,c.length&&i()}function i(){if(!s){var n=setTimeout(r);s=!0;for(var e=c.length;e;){for(u=c,c=[];++l<e;)u&&u[l].run();l=-1,e=c.length}u=null,s=!1,clearTimeout(n)}}function o(n,e){this.fun=n,this.array=e}function f(){}var u,a=e.exports={},c=[],s=!1,l=-1;a.nextTick=function(n){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];c.push(new o(n,e)),1!==c.length||s||setTimeout(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=f,a.addListener=f,a.once=f,a.off=f,a.removeListener=f,a.removeAllListeners=f,a.emit=f,a.binding=function(n){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(n){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],2:[function(e,t,r){(function(i){!function(e){if("object"==typeof r&&"undefined"!=typeof t)t.exports=e();else if("function"==typeof n&&n.amd)n([],e);else{var o;o="undefined"!=typeof window?window:"undefined"!=typeof i?i:"undefined"!=typeof self?self:this,o.imagine=e()}}(function(){return function n(t,r,i){function o(u,a){if(!r[u]){if(!t[u]){var c="function"==typeof e&&e;if(!a&&c)return c(u,!0);if(f)return f(u,!0);var s=new Error("Cannot find module '"+u+"'");throw s.code="MODULE_NOT_FOUND",s}var l=r[u]={exports:{}};t[u][0].call(l.exports,function(n){var e=t[u][1][n];return o(e?e:n)},l,l.exports,n,t,r,i)}return r[u].exports}for(var f="function"==typeof e&&e,u=0;u<i.length;u++)o(i[u]);return o}({1:[function(n,e,t){function r(){s=!1,u.length?c=u.concat(c):l=-1,c.length&&i()}function i(){if(!s){var n=setTimeout(r);s=!0;for(var e=c.length;e;){for(u=c,c=[];++l<e;)u&&u[l].run();l=-1,e=c.length}u=null,s=!1,clearTimeout(n)}}function o(n,e){this.fun=n,this.array=e}function f(){}var u,a=e.exports={},c=[],s=!1,l=-1;a.nextTick=function(n){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];c.push(new o(n,e)),1!==c.length||s||setTimeout(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=f,a.addListener=f,a.once=f,a.off=f,a.removeListener=f,a.removeAllListeners=f,a.emit=f,a.binding=function(n){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(n){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],2:[function(n,e,t){(function(n){!function(e){function t(n){return"function"==typeof n}function r(n){return"object"==typeof n}function i(e){"undefined"!=typeof setImmediate?setImmediate(e):"undefined"!=typeof n&&n.nextTick?n.nextTick(e):setTimeout(e,0)}var o;e[0][e[1]]=function f(n){var e,u=[],a=[],c=function(n,t){return null==e&&null!=n&&(e=n,u=t,a.length&&i(function(){for(var n=0;n<a.length;n++)a[n]()})),e};return c.then=function(c,s){var l=f(n),h=function(){function n(e){var i,f=0;try{if(e&&(r(e)||t(e))&&t(i=e.then)){if(e===l)throw new TypeError;i.call(e,function(){f++||n.apply(o,arguments)},function(n){f++||l(!1,[n])})}else l(!0,arguments)}catch(u){f++||l(!1,[u])}}try{var i=e?c:s;t(i)?n(i.apply(o,u||[])):l(e,u)}catch(f){l(!1,[f])}};return null!=e?i(h):a.push(h),l},n&&(c=n(c)),c}}("undefined"==typeof e?[window,"pinkySwear"]:[e,"exports"])}).call(this,n("_process"))},{_process:1}],imagine:[function(n,e,t){e.exports=function(e){var t,r=n("pinkyswear")(function(n){return n["catch"]=function(e){return n.then(null,e)},n}),i=function(n){for(var t=[],r=0,i=e.length;i>r;++r)e[r].imagine==n&&t.push(e[r]);return t},o=function(){for(var n=0,t=e.length;t>n;++n)if(!("imagine"in e[n]))return!0;return!1},f=function(n){"undefined"==typeof n.imagine&&(n.imagine="loaded"),o()||(i("failed").length?r(!1,[i("failed")]):r(!0,[i("loaded")]))},u=function(n){return function(e){n.imagine="failed",o()||r(!1,[i("failed")])}},a=function(n,e){var t=setInterval(function(){n.complete&&n.width&&(clearInterval(t),f(e))},100)};"object"==typeof e&&"length"in e||(e=[e]);var c,s,l;for(c=0,s=e.length;s>c;++c)"string"==typeof e[c]&&(l=e[c],e[c]=document.createElement("img"),e[c].src=l);for(c=0,s=e.length;s>c;++c)t=new Image,t.onerror=u(e[c]),t.src=e[c].src,a(t,e[c]);return r}},{pinkyswear:2}]},{},[2])("imagine")})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(n,e,t){(function(n){!function(e){function t(n){return"function"==typeof n}function r(n){return"object"==typeof n}function i(e){"undefined"!=typeof setImmediate?setImmediate(e):"undefined"!=typeof n&&n.nextTick?n.nextTick(e):setTimeout(e,0)}var o;e[0][e[1]]=function f(n){var e,u=[],a=[],c=function(n,t){return null==e&&null!=n&&(e=n,u=t,a.length&&i(function(){for(var n=0;n<a.length;n++)a[n]()})),e};return c.then=function(c,s){var l=f(n),h=function(){function n(e){var i,f=0;try{if(e&&(r(e)||t(e))&&t(i=e.then)){if(e===l)throw new TypeError;i.call(e,function(){f++||n.apply(o,arguments)},function(n){f++||l(!1,[n])})}else l(!0,arguments)}catch(u){f++||l(!1,[u])}}try{var i=e?c:s;t(i)?n(i.apply(o,u||[])):l(e,u)}catch(f){l(!1,[f])}};return null!=e?i(h):a.push(h),l},n&&(c=n(c)),c}}("undefined"==typeof e?[window,"pinkySwear"]:[e,"exports"])}).call(this,n("_process"))},{_process:1}],4:[function(n,e,t){e.exports=function(e){var t,r=n("pinkyswear")(function(n){return n["catch"]=function(e){return n.then(null,e)},n}),i=function(n){for(var t=[],r=0,i=e.length;i>r;++r)e[r].imagine==n&&t.push(e[r]);return t},o=function(){for(var n=0,t=e.length;t>n;++n)if(!("imagine"in e[n]))return!0;return!1},f=function(n){"undefined"==typeof n.imagine&&(n.imagine="loaded"),o()||(i("failed").length?r(!1,[i("failed")]):r(!0,[i("loaded")]))},u=function(n){return function(e){n.imagine="failed",o()||r(!1,[i("failed")])}},a=function(n,e){var t=setInterval(function(){n.complete&&n.width&&(clearInterval(t),f(e))},100)};"object"==typeof e&&"length"in e||(e=[e]);var c,s,l;for(c=0,s=e.length;s>c;++c)"string"==typeof e[c]&&(l=e[c],e[c]=document.createElement("img"),e[c].src=l);for(c=0,s=e.length;s>c;++c)t=new Image,t.onerror=u(e[c]),t.src=e[c].src,a(t,e[c]);return r}},{pinkyswear:3}],panorama:[function(n,e,t){e.exports=function(e,t,r){var i,o=document.createElement("canvas");if(r=r||{},r.size="size"in r?r.size:"cover",r.attachment="attachment"in r?r.attachment:"scroll",r.left="left"in r?r.left:"center",r.top="top"in r?r.top:"center",o.getContext&&(i=o.getContext("2d")))return o.style.position="scroll"==r.attachment?"absolute":"fixed",o.style.zIndex=-1,o.style.top=0,o.style.left=0,e.appendChild(o),n("pyrsmk-imagine")(t).then(function(n){var t=n[0];return t.redraw=function(){var n,f,u,a;switch(o.width=e.offsetWidth,o.height=e.offsetHeight,r.size){case"cover":t.width/o.width>t.height/o.height?(u=Math.round(o.height/t.height*t.width),a=o.height):(a=Math.round(o.width/t.width*t.height),u=o.width);break;case"contain":t.width/o.width>t.height/o.height?(a=Math.round(o.width/t.width*t.height),u=o.width):(u=Math.round(o.height/t.height*t.width),a=o.height);break;default:throw new Error("'"+r.size+"' size option is not supported")}n="center"===r.left?(o.width-u)/2:r.left,f="center"===r.top?(o.height-a)/2:r.top,i.drawImage(t,n,f,u,a)},t.redraw(),t});var f=r.left+("string"!=typeof r.left?"px":""),u=r.top+("string"!=typeof r.top?"px":"");return e.style.backgroundImage="url("+t+")",e.style.backgroundSize=r.size,e.style.backgroundPosition=f+" "+u,e.style.backgroundRepeat="no-repeat",e.style.backgroundAttachment=r.attachment,{then:function(){}}}},{"pyrsmk-imagine":4}]},{},[2])("panorama")});