!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.panorama=n()}}(function(){var n;return function e(n,t,i){function r(f,u){if(!t[f]){if(!n[f]){var c="function"==typeof require&&require;if(!u&&c)return c(f,!0);if(o)return o(f,!0);var a=new Error("Cannot find module '"+f+"'");throw a.code="MODULE_NOT_FOUND",a}var d=t[f]={exports:{}};n[f][0].call(d.exports,function(e){var t=n[f][1][e];return r(t?t:e)},d,d.exports,e,n,t,i)}return t[f].exports}for(var o="function"==typeof require&&require,f=0;f<i.length;f++)r(i[f]);return r}({1:[function(n,e,t){function i(){d=!1,u.length?a=u.concat(a):h=-1,a.length&&r()}function r(){if(!d){var n=setTimeout(i);d=!0;for(var e=a.length;e;){for(u=a,a=[];++h<e;)u&&u[h].run();h=-1,e=a.length}u=null,d=!1,clearTimeout(n)}}function o(n,e){this.fun=n,this.array=e}function f(){}var u,c=e.exports={},a=[],d=!1,h=-1;c.nextTick=function(n){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];a.push(new o(n,e)),1!==a.length||d||setTimeout(r,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=f,c.addListener=f,c.once=f,c.off=f,c.removeListener=f,c.removeAllListeners=f,c.emit=f,c.binding=function(n){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(n){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},{}],2:[function(e,t,i){(function(r){!function(e){if("object"==typeof i&&"undefined"!=typeof t)t.exports=e();else if("function"==typeof n&&n.amd)n([],e);else{var o;o="undefined"!=typeof window?window:"undefined"!=typeof r?r:"undefined"!=typeof self?self:this,o.imagine=e()}}(function(){return function n(t,i,r){function o(u,c){if(!i[u]){if(!t[u]){var a="function"==typeof e&&e;if(!c&&a)return a(u,!0);if(f)return f(u,!0);var d=new Error("Cannot find module '"+u+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[u]={exports:{}};t[u][0].call(h.exports,function(n){var e=t[u][1][n];return o(e?e:n)},h,h.exports,n,t,i,r)}return i[u].exports}for(var f="function"==typeof e&&e,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(n,e,t){function i(){d=!1,u.length?a=u.concat(a):h=-1,a.length&&r()}function r(){if(!d){var n=setTimeout(i);d=!0;for(var e=a.length;e;){for(u=a,a=[];++h<e;)u&&u[h].run();h=-1,e=a.length}u=null,d=!1,clearTimeout(n)}}function o(n,e){this.fun=n,this.array=e}function f(){}var u,c=e.exports={},a=[],d=!1,h=-1;c.nextTick=function(n){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];a.push(new o(n,e)),1!==a.length||d||setTimeout(r,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=f,c.addListener=f,c.once=f,c.off=f,c.removeListener=f,c.removeAllListeners=f,c.emit=f,c.binding=function(n){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(n){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},{}],2:[function(n,e,t){(function(n){!function(e){function t(n){return"function"==typeof n}function i(n){return"object"==typeof n}function r(e){"undefined"!=typeof setImmediate?setImmediate(e):"undefined"!=typeof n&&n.nextTick?n.nextTick(e):setTimeout(e,0)}var o;e[0][e[1]]=function f(n){var e,u=[],c=[],a=function(n,t){return null==e&&null!=n&&(e=n,u=t,c.length&&r(function(){for(var n=0;n<c.length;n++)c[n]()})),e};return a.then=function(a,d){var h=f(n),s=function(){function n(e){var r,f=0;try{if(e&&(i(e)||t(e))&&t(r=e.then)){if(e===h)throw new TypeError;r.call(e,function(){f++||n.apply(o,arguments)},function(n){f++||h(!1,[n])})}else h(!0,arguments)}catch(u){f++||h(!1,[u])}}try{var r=e?a:d;t(r)?n(r.apply(o,u||[])):h(e,u)}catch(f){h(!1,[f])}};return null!=e?r(s):c.push(s),h},n&&(a=n(a)),a}}("undefined"==typeof e?[window,"pinkySwear"]:[e,"exports"])}).call(this,n("_process"))},{_process:1}],imagine:[function(n,e,t){e.exports=function(e){var t=n("pinkyswear")(function(n){return n["catch"]=function(e){return n.then(null,e)},n}),i=function(n){for(var t=[],i=0,r=e.length;r>i;++i)e[i].imagine==n&&t.push(e[i]);return t},r=function(){for(var n=0,t=e.length;t>n;++n)if(!("imagine"in e[n]))return!0;return!1},o=function(n){"undefined"==typeof n.imagine&&(n.imagine="loaded"),r()||(i("failed").length?t(!1,[i("failed")]):t(!0,[i("loaded")]))},f=function(n){return function(e){n.imagine="failed",r()||t(!1,[i("failed")])}},u=function(n){var e=setInterval(function(){n.complete&&n.width&&(clearInterval(e),o(n))},100)};"object"==typeof e&&"length"in e||(e=[e]);var c,a,d;for(a=0,d=e.length;d>a;++a)"string"==typeof e[a]?(c=new Image,c.src=e[a],e[a]=c):c=e[a],c.onerror=f(c),u(c);return t}},{pinkyswear:2}]},{},[2])("imagine")})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(n,e,t){(function(n){!function(e){function t(n){return"function"==typeof n}function i(n){return"object"==typeof n}function r(e){"undefined"!=typeof setImmediate?setImmediate(e):"undefined"!=typeof n&&n.nextTick?n.nextTick(e):setTimeout(e,0)}var o;e[0][e[1]]=function f(n){var e,u=[],c=[],a=function(n,t){return null==e&&null!=n&&(e=n,u=t,c.length&&r(function(){for(var n=0;n<c.length;n++)c[n]()})),e};return a.then=function(a,d){var h=f(n),s=function(){function n(e){var r,f=0;try{if(e&&(i(e)||t(e))&&t(r=e.then)){if(e===h)throw new TypeError;r.call(e,function(){f++||n.apply(o,arguments)},function(n){f++||h(!1,[n])})}else h(!0,arguments)}catch(u){f++||h(!1,[u])}}try{var r=e?a:d;t(r)?n(r.apply(o,u||[])):h(e,u)}catch(f){h(!1,[f])}};return null!=e?r(s):c.push(s),h},n&&(a=n(a)),a}}("undefined"==typeof e?[window,"pinkySwear"]:[e,"exports"])}).call(this,n("_process"))},{_process:1}],4:[function(n,e,t){e.exports=function(e){var t=n("pinkyswear")(function(n){return n["catch"]=function(e){return n.then(null,e)},n}),i=function(n){for(var t=[],i=0,r=e.length;r>i;++i)e[i].imagine==n&&t.push(e[i]);return t},r=function(){for(var n=0,t=e.length;t>n;++n)if(!("imagine"in e[n]))return!0;return!1},o=function(n){"undefined"==typeof n.imagine&&(n.imagine="loaded"),r()||(i("failed").length?t(!1,[i("failed")]):t(!0,[i("loaded")]))},f=function(n){return function(e){n.imagine="failed",r()||t(!1,[i("failed")])}},u=function(n){var e=setInterval(function(){n.complete&&n.width&&(clearInterval(e),o(n))},100)};"object"==typeof e&&"length"in e||(e=[e]);var c,a,d;for(a=0,d=e.length;d>a;++a)"string"==typeof e[a]?(c=new Image,c.src=e[a],e[a]=c):c=e[a],c.onerror=f(c),u(c);return t}},{pinkyswear:3}],5:[function(e,t,i){!function(e,r){"function"==typeof n&&n.amd?n([],r):"object"==typeof i?t.exports=r():e.W=r()}(this,function(){function n(){var n;if("orientation"in window){var e=window.orientation;n=90==e||-90==e}else n=window.innerWidth>window.innerHeight;return n?"landscape":"portrait"}function e(e){var t=screen.width,i=screen.height;if("landscape"==n()&&i>t&&(t=screen.height,i=screen.width),e)return{width:t,height:i};var r=window.innerWidth,o=window.innerHeight;return(!r||!o||r>t||o>i||980==r)&&(r=window.outerWidth,o=window.outerHeight),(!r||!o||r>t||o>i)&&(r=screen.availWidth,o=screen.availHeight),{width:r,height:o}}var t=[],i=!1;window.addEventListener?"onorientationchange"in window?window.addEventListener("orientationchange",function(){i=!0},!1):window.addEventListener("resize",function(){i=!0},!1):window.attachEvent("onresize",function(){i=!0}),setInterval(function(){if(i&&document.documentElement.clientWidth){i=!1;for(var n=0,e=t.length;e>n;++n)t[n].func()}},10);var r={getViewportDimensions:function(n){return e(n)},getViewportWidth:function(n){return e(n).width},getViewportHeight:function(n){return e(n).height},getOrientation:function(){return n()},addListener:function(n,e){return t.push({func:n,key:e}),n},removeListener:function(n){for(var e=0,i=t.length;i>e;++e)if(t[e].key==n){t.splice(e,1);break}},clearListeners:function(){t=[]},trigger:function(n){for(var e=0,i=t.length;i>e;++e)"undefined"!=typeof n&&t[e].key!=n||t[e].func()}};return r})},{}],6:[function(e,t,i){!function(e,r){"function"==typeof n&&n.amd?n([],r):"object"==typeof i?t.exports=r():e.W=r()}(this,function(){function n(){var n;if("orientation"in window){var e=window.orientation;n=90==e||-90==e}else n=window.innerWidth>window.innerHeight;return n?"landscape":"portrait"}function e(e){var t=screen.width,i=screen.height;if("landscape"==n()&&i>t&&(t=screen.height,i=screen.width),e)return{width:t,height:i};var r=window.innerWidth,o=window.innerHeight;return(!r||!o||r>t||o>i||980==r)&&(r=window.outerWidth,o=window.outerHeight),(!r||!o||r>t||o>i)&&(r=screen.availWidth,o=screen.availHeight),{width:r,height:o}}var t=[],i=!1;window.addEventListener?"onorientationchange"in window?window.addEventListener("orientationchange",function(){i=!0},!1):window.addEventListener("resize",function(){i=!0},!1):window.attachEvent("onresize",function(){i=!0}),setInterval(function(){if(i&&document.documentElement.clientWidth){i=!1;for(var n=0,e=t.length;e>n;++n)t[n].func()}},10);var r={getViewportDimensions:function(n){return e(n)},getViewportWidth:function(n){return e(n).width},getViewportHeight:function(n){return e(n).height},getOrientation:function(){return n()},addListener:function(n,e){return t.push({func:n,key:e}),n},removeListener:function(n){for(var e=0,i=t.length;i>e;++e)if(t[e].key==n){t.splice(e,1);break}},clearListeners:function(){t=[]},trigger:function(n){for(var e=0,i=t.length;i>e;++e)("undefined"==typeof n||t[e].key==n)&&t[e].func()}};return r})},{}],panorama:[function(n,e,t){e.exports=function(e,t,i){var r,o,f=document.createElement("canvas"),u=n("pyrsmk-w"),c=n("pyrsmk-imagine"),a=function(n){var e,t,o,u;switch(i.size){case"cover":n.width/f.width>n.height/f.height?(o=Math.round(f.height/n.height*n.width),u=f.height):(u=Math.round(f.width/n.width*n.height),o=f.width);break;case"contain":n.width/f.width>n.height/f.height?(u=Math.round(f.width/n.width*n.height),o=f.width):(o=Math.round(f.height/n.height*n.width),u=f.height);break;default:throw new Error("'"+i.size+"' size option is not supported")}e="center"===i.left?(f.width-o)/2:i.left,t="center"===i.top?(f.height-u)/2:i.top,r.drawImage(n,e,t,o,u)};return i=i||{},i.size="size"in i?i.size:"cover",i.attachment="attachment"in i?i.attachment:"scroll",i.left="left"in i?i.left:"center",i.top="top"in i?i.top:"center","string"==typeof t&&(t={0:t}),u.addListener(function(){var n,d,h=u.getViewportWidth(),s=0;for(d in t)h>=d&&(s=d);if(n=t[s],f.getContext&&(r=f.getContext("2d")))return f.style.position="scroll"==i.attachment?"absolute":"fixed",f.style.zIndex=-1,f.style.top=0,f.style.left=0,e.appendChild(f),c(n).then(function(n){f.draw=function(n){return function(){a(n)}}(n[0]),f.width=e.offsetWidth,f.height=e.offsetHeight,o&&o(n[0]),a(n[0])});var l=i.left+("string"!=typeof i.left?"px":""),p=i.top+("string"!=typeof i.top?"px":"");e.style.backgroundImage="url("+n+")",e.style.backgroundSize=i.size,e.style.backgroundPosition=l+" "+p,e.style.backgroundRepeat="no-repeat",e.style.backgroundAttachment=i.attachment})(),{then:function(n){o=n}}}},{"pyrsmk-imagine":4,"pyrsmk-w":5}]},{},[2,6])("panorama")});